<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M7 Swiss Stage Predictor</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo-badge">
                <span class="logo-m7">M7</span>
                <span class="logo-sub">WORLD CHAMPIONSHIP</span>
            </div>
            <h1 class="main-title">–§–û–†–ú–ê–¢ <span class="cyan">–®–í–ï–ô–¶–ê–†–ö–ò</span></h1>
            <p class="wc-note">* WC1 –∏ WC2 –ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —É—Å–ª–æ–≤–Ω–æ</p>
        </header>

        <!-- Controls -->
        <div class="controls">
            <button id="resetBtn" class="btn btn-reset">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
            <button id="saveBtn" class="btn btn-save">üíæ</button>
            <input type="text" id="nickInput" class="nick-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –Ω–∏–∫..." maxlength="15">

            <button id="swapWcBtn" class="btn btn-swap">ÔøΩ WC1‚ÜîWC2</button>

            <button id="setupBtn" class="btn btn-setup">‚öôÔ∏è</button>
        </div>

        <!-- Mobile Minimap (shows full bracket structure miniaturized) -->
        <div class="mobile-minimap" id="mobileMinimap">
            <div class="minimap-bracket">
                <!-- Stage 1 -->
                <div class="mini-stage" data-stage="1">
                    <div class="mini-pool" data-pool="0-0">0-0</div>
                    <div class="mini-footer">–≠–¢–ê–ü 1</div>
                </div>

                <div class="flow-connector mobile-flow" id="mob-conn-2"></div>

                <!-- Stage 2 -->
                <div class="mini-stage" data-stage="2">
                    <div class="mini-pool winners" data-pool="1-0">1-0</div>
                    <div class="mini-pool losers" data-pool="0-1">0-1</div>
                    <div class="mini-footer">–≠–¢–ê–ü 2</div>
                </div>

                <div class="flow-connector mobile-flow" id="mob-conn-3"></div>

                <!-- Stage 3 -->
                <div class="mini-stage" data-stage="3">
                    <div class="mini-pool winners" data-pool="2-0">2-0</div>
                    <div class="mini-pool" data-pool="1-1">1-1</div>
                    <div class="mini-pool losers" data-pool="0-2">0-2</div>
                    <div class="mini-footer">–≠–¢–ê–ü 3</div>
                </div>

                <div class="flow-connector mobile-flow" id="mob-conn-4"></div>

                <!-- Stage 4 -->
                <div class="mini-stage" data-stage="4">
                    <div class="mini-result qualified">3-0</div>
                    <div class="mini-pool winners" data-pool="2-1">2-1</div>
                    <div class="mini-pool losers" data-pool="1-2">1-2</div>
                    <div class="mini-result eliminated">0-3</div>
                    <div class="mini-footer">–≠–¢–ê–ü 4</div>
                </div>

                <div class="flow-connector mobile-flow" id="mob-conn-5"></div>

                <!-- Stage 5 -->
                <div class="mini-stage" data-stage="5">
                    <div class="mini-result qualified">3-1</div>
                    <div class="mini-pool" data-pool="2-2">2-2</div>
                    <div class="mini-result eliminated">1-3</div>
                    <div class="mini-footer">–≠–¢–ê–ü 5</div>
                </div>

                <div class="flow-connector mobile-flow" id="mob-conn-final"></div>

                <!-- Final -->
                <div class="mini-stage" data-stage="final">
                    <div class="mini-result qualified">3-2</div>
                    <div class="mini-result eliminated">2-3</div>
                </div>
            </div>
        </div>

        <!-- Mobile Active Stage (expanded for selection) -->
        <div class="mobile-active-stage" id="mobileActiveStage">
            <div class="active-stage-header">
                <span class="active-stage-title" id="activeStageTitle">–≠–¢–ê–ü 1</span>
                <div class="stage-nav">
                    <button class="nav-btn" id="prevStage">‚óÄ</button>
                    <button class="nav-btn" id="nextStage">‚ñ∂</button>
                </div>
            </div>
            <div class="active-stage-content" id="activeStageContent">
                <!-- Pools rendered here -->
            </div>
        </div>

        <!-- Setup Modal -->
        <div id="setupModal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-box">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è</h3>
                <div id="setupTeams" class="setup-list"></div>
                <div class="modal-actions">
                    <button id="cancelSetup" class="btn btn-cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button id="applySetup" class="btn btn-apply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- Desktop Bracket -->
        <div class="bracket-container">
            <div class="bracket">
                <!-- –≠–¢–ê–ü 1 -->
                <div class="stage" data-stage="1">
                    <div class="pool-box">
                        <div class="pool-title"><span class="pool-score">0-0</span></div>
                        <div class="pool-format">BO1, 8 BO1 –í –û–ë–©–ï–ú</div>
                        <div class="matches-list" id="matches-0-0"></div>
                    </div>
                    <div class="stage-footer">
                        <div class="stage-name">–≠–¢–ê–ü 1</div>
                        <div class="stage-date">10 —è–Ω–≤, 2026</div>
                    </div>
                </div>


                <div class="flow-connector" id="conn-1"></div>
                <!-- –≠–¢–ê–ü 2 -->
                <div class="stage" data-stage="2">
                    <div class="pool-box pool-winners">
                        <div class="pool-title"><span class="pool-score">1-0</span></div>
                        <div class="pool-format">BO1</div>
                        <div class="matches-list" id="matches-1-0"></div>
                    </div>
                    <div class="pool-box pool-losers">
                        <div class="pool-title"><span class="pool-score">0-1</span></div>
                        <div class="pool-format">BO1</div>
                        <div class="matches-list" id="matches-0-1"></div>
                    </div>
                    <div class="stage-footer">
                        <div class="stage-name">–≠–¢–ê–ü 2</div>
                        <div class="stage-date">11 —è–Ω–≤</div>
                    </div>
                </div>



                <div class="flow-connector" id="conn-2"></div>
                <!-- –≠–¢–ê–ü 3 -->
                <div class="stage" data-stage="3">
                    <div class="pool-box pool-winners">
                        <div class="pool-title"><span class="pool-score">2-0</span></div>
                        <div class="pool-format">BO3</div>
                        <div class="matches-list" id="matches-2-0"></div>
                    </div>
                    <div class="pool-box">
                        <div class="pool-title"><span class="pool-score">1-1</span></div>
                        <div class="pool-format">BO1</div>
                        <div class="matches-list" id="matches-1-1"></div>
                    </div>
                    <div class="pool-box pool-losers">
                        <div class="pool-title"><span class="pool-score">0-2</span></div>
                        <div class="pool-format">BO3</div>
                        <div class="matches-list" id="matches-0-2"></div>
                    </div>
                    <div class="stage-footer">
                        <div class="stage-name">–≠–¢–ê–ü 3</div>
                        <div class="stage-date">12-13 —è–Ω–≤</div>
                    </div>
                </div>


                <div class="flow-connector" id="conn-3"></div>
                <!-- –≠–¢–ê–ü 4 -->
                <div class="stage" data-stage="4">
                    <div class="result-box qualified">
                        <div class="result-score">3-0</div>
                        <div class="result-text">–ü–õ–ï–ô-–û–§–§</div>
                        <div class="result-teams" id="result-3-0"></div>
                    </div>
                    <div class="pool-box pool-winners">
                        <div class="pool-title"><span class="pool-score">2-1</span></div>
                        <div class="pool-format">BO3</div>
                        <div class="matches-list" id="matches-2-1"></div>
                    </div>
                    <div class="pool-box pool-losers">
                        <div class="pool-title"><span class="pool-score">1-2</span></div>
                        <div class="pool-format">BO3</div>
                        <div class="matches-list" id="matches-1-2"></div>
                    </div>
                    <div class="result-box eliminated">
                        <div class="result-score">0-3</div>
                        <div class="result-text">–í–´–ë–´–õ–ò</div>
                        <div class="result-teams" id="result-0-3"></div>
                    </div>
                    <div class="stage-footer">
                        <div class="stage-name">–≠–¢–ê–ü 4</div>
                        <div class="stage-date">15-16 —è–Ω–≤</div>
                    </div>
                </div>


                <div class="flow-connector" id="conn-4"></div>
                <!-- –≠–¢–ê–ü 5 -->
                <div class="stage" data-stage="5">
                    <div class="result-box qualified">
                        <div class="result-score">3-1</div>
                        <div class="result-text">–ü–õ–ï–ô-–û–§–§</div>
                        <div class="result-teams" id="result-3-1"></div>
                    </div>
                    <div class="pool-box">
                        <div class="pool-title"><span class="pool-score">2-2</span></div>
                        <div class="pool-format">BO3</div>
                        <div class="matches-list" id="matches-2-2"></div>
                    </div>
                    <div class="result-box eliminated">
                        <div class="result-score">1-3</div>
                        <div class="result-text">–í–´–ë–´–õ–ò</div>
                        <div class="result-teams" id="result-1-3"></div>
                    </div>
                    <div class="stage-footer">
                        <div class="stage-name">–≠–¢–ê–ü 5</div>
                        <div class="stage-date">17 —è–Ω–≤</div>
                    </div>
                </div>


                <div class="flow-connector" id="conn-5"></div>
                <!-- –§–ò–ù–ê–õ -->
                <div class="stage stage-final" data-stage="final">
                    <div class="result-box qualified">
                        <div class="result-score">3-2</div>
                        <div class="result-text">–ü–õ–ï–ô-–û–§–§</div>
                        <div class="result-teams" id="result-3-2"></div>
                    </div>
                    <div class="spacer"></div>
                    <div class="result-box eliminated">
                        <div class="result-score">2-3</div>
                        <div class="result-text">–í–´–ë–´–õ–ò</div>
                        <div class="result-teams" id="result-2-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer-ticker">
            <span>M7 WORLD CHAMPIONSHIP</span>
            <span class="ticker-sep">‚ñ∏</span>
            <span>ROAD TO JAKARTA</span>
        </div>

        <!-- Nickname Modal (shown at tournament end) -->
        <div id="nickModal" class="modal hidden">
            <div class="modal-content">
                <h2>üèÜ –¢—É—Ä–Ω–∏—Ä –∑–∞–≤–µ—Ä—à—ë–Ω!</h2>
                <p style="color: #bbb; font-size: 0.9rem; margin-bottom: 1rem;">–ù–∞–ø–∏—à–∏—Ç–µ –Ω–∏–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ:</p>
                <input type="text" id="nicknameInput" placeholder="–í–∞—à –Ω–∏–∫..." maxlength="15">
                <div class="modal-buttons">
                    <button id="saveNickBtn" class="btn btn-trigger">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="closeNickBtn" class="btn btn-reset">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>

    <script src="app.js"></script>
</body>

</html>